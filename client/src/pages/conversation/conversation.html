<ion-header>
    <ion-navbar>
        <button ion-button menuToggle>
        <ion-icon name="menu"></ion-icon>
      </button>
        <ion-title>
            <span *ngFor="let user of detail.users">{{user.name}}</span>
        </ion-title>
    </ion-navbar>
</ion-header>

<ion-content padding>
    <div id="conversation-content">
        <div margin-bottom></div>
        <div text-right *ngIf="seen"><em>Đã xem</em></div>
        <div class="message-list">
            <div *ngFor="let message of messages" (click)="showTimeId = message._id" [ngClass]="{'not-you': message.from._id != auth.user._id, 'it-you': message.from._id == auth.user._id}">
                <div class="message-content">
                    <span>{{message.content}}</span>
                </div>
                <div *ngIf="showTimeId == message._id" margin-bottom>
                    <em>({{message.created | date:'dd/MM/yyyy HH:mm:ss'}})</em>
                </div>
            </div>
        </div>
    </div>
</ion-content>

<ion-footer id="conversation-footer">
    <div *ngIf="typingUsers && typingUsers.length" class="typing">
        <em><span *ngFor="let item of typingUsers">{{item.userName}}</span> đang nhập...</em>
    </div>
    <ion-grid no-padding no-margin>
        <ion-row no-padding no-margin>
            <ion-col col-10 border-top>
                <ion-input #messageInput class="message-input" margin no-margin-left type="text" [(ngModel)]="message" placeholder="Viết gì đó..." (keyup.enter)="sendMessage(message)" (ngModelChange)="changeMessage($event, message)" (ionFocus)="messageInputFocus(true)"></ion-input>
            </ion-col>
            <ion-col col-2 no-padding no-margin>
                <button class="send-btn" no-padding no-margin full-height full ion-button small (click)="sendMessage(message)">Gửi</button>
            </ion-col>
        </ion-row>
    </ion-grid>
</ion-footer>